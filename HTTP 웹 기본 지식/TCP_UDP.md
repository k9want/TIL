### IP(인터넷 프로토콜)에서 발생했던 문제들을 TCP가 해결해준다.

## 인터넷 프로토콜 스택의 4계층

1. 애플리케이션 계층 - HTTP, FTP
2. 전송 계층 - TCP, UDP
3. 인터넷 계층 - IP
4. 네트워크 인터페이스 계층



### 패킷이란?

패키지 + 버킷의 합성어

네트워크를 통해 전송하기 쉽도록 자른 데이터의 전송 단위

## TCP/IP 패킷 정보

IP 패킷 - 출발지 IP, 목적지 IP, 기타....

TCP 세그먼트 - 출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보 등...


## TCP 특징

전송 제어 프로토콜(Transmisson Control Protocol)

신뢰할 수 있는 프로토콜이며 대부분 TCP를 사용한다.

- 연결지향 - TCP 3 way handshake(가상 연결)

  중요한 것은 물리적으로 연결된 것이 아니다!!

  **개념적으로만 연결되었다는 것!!! 그냥 우리 둘이 (클라이언트-서버)논리적으로 연결이 되었나보다 라고 생각만 하자**

  둘 사이에 거치는 수많은 노드들은 연결이 되었는지는 모른다.

    1. 클라이언트에서 서버로 SYN(접속 요청) 메시지를 보낸다.
    2. 받았다면 서버에서는 SYN(나도 접속 요청) 메시지와 같이  ACK(요청 수락) 메시지를 보낸다.
    3. 클라이언트가 ACK(요청 수락했어)메시지를 보낸다. + (이때 ACK와 함께 데이터 전송도 가능하다)
    4. (connect과정) 이후에 데이터 전송한다.


- 데이터 전달 보증

  클라이언트에서 데이터 전송을 하면서 서버에서는 데이터 잘 받았다고 메시지를 보내준다. 이를 통해 데이터가 잘 전달되었는지 알 수 있다.


- 순서 보장

  서버에서 최적화할 수는 있지만

  기본적으로는 패킷순서가 잘못왔다면 다시 잘못된 패킷부터 다시 보내달라고 요청한다.



### 그러면 위의 것들이 어떻게 가능한걸까?

TCP 안에 전송 제어, 순서, 검증 정보 등이 추가되어 있어 가능하다.  이를 통해 TCP가 신뢰할 수 있는 프로토콜이라고 한다.


## UDP 특징

사용자 데이터그램 프로토콜(User Datagram Protocol)

- 하얀 도화지처럼 기능이 거의 없다.
- 연결지향 ( TCP 3 way handshake X )
- 데이터 전달 보증 X
- 순서 보장 X
- 하지만!!! 데이터 전달 및 순서가 보장되지 않지만, **단순하고 빠르다**

IP와 거의 같다. PORT와 체크섬 정도만 추가된다.

그렇기 때문에 애플리케이션에서 추가 작업이 필요하다.

### PORT

하나의 IP에서 여러 개의 애플리케이션이 실행될 때 패킷들이 어떤 애플리케이션의 패킷인지 구분하기 위해 포트를 사용한다.

Port 정보를 통해 어떤 프로세스가 메시지를 받아야 하는지 알 수 있다.

### 체크섬

메시지에 대한 정보가 맞는지 틀린지 체크해준다.

송신된 자료의 무결성을 보호하는 단순한 방법

#### 참고

최근에는 UDP가 뜨고 있다?!

웹브라우저에서 HTTP통신을 할 떄 HTTP3에서는 TCP에서 3 way handshake를 줄여보자고  UDP를 사용하고 있다고 한다.