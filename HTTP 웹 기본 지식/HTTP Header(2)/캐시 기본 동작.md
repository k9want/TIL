# 캐시 기본 동작

캐시는 어떻게 동작할까?

### 캐시가 없을 때

예를 들어

첫 번째 요청으로 웹브라우저에서 /star.jpg라는 것을 요청한다고 가정했을때


서버에서 star.jpg 응답을 해준다.


두 번째 요청으로 또 /star.jpg를 요청했을 때


서버에서는 또 star.jpg 응답을 해준다.


### 정리

- 데이터가 변경되지 않아도 계속 네트워크를 통해서 데이터를 다운로드 받아야한다.


### 캐시를 적용하면

예를 들어

첫 번째 요청으로 웹브라우저에서 /star.jpg라는 것을 요청한다고 가정했을때


서버에서 캐시관련 해서 셋팅하고 캐시를 적용하면 서버에서 HTTP헤더에 cache-control(캐시가 유효한 시간(초))를 넣어서 응답을 보낸다.

웹 브라우저에 캐시를 저장하는 저장소에 cache-control을 보고 그에 맞게 응답 결과를 캐시에 저장한다.


/star.jpg를 두 번째 요청할 때 캐시를 먼저 확인하고 유효시간이 맞다면 바로 캐시에서 바로 가져온다.



### 정리

- 캐시 덕분에 캐시 가는 시간동안 네트워크를 사용하지 않아도 된다.
- 브라우저 로딩 속도가 매우 빠르다.


### 캐시 적용 - 캐시 시간 초과

그런데 세 번째 요청을 하는데 캐시 유효시간 초과라면


서버에 다시 요청을 하고


받은 데이터를 다시 캐시에 저장한다.


### 정리

- 캐시 유효 시간이 초과하면, 서버를 통해 데이터를 다시 조회하고 캐시를 갱신한다. 이 때는 네트워크 다운로드가 다시 발생한다.


근데 서버에서 가지고 있는 데이터랑 유효 기간이 만료된 캐시가 같다면? 굳이 다시 다운로드 받을 필요가 있을까??라는 의문이 생긴다. (다음 강의)