# 프록시 서버

### 원 서버 직접 접근 - origin 서버

진짜 서버라고 생각하자.

한국에 있는 여러 클라이언트가 미국에 있는 서버에 접근을 하는데 해당 애플리케이션에서 이미지를 제공하는 원소스가 있는 서버를 원서버라고 한다.

미국의 원서버에서 한국에 있는 클라이언트 사이의 거리가 너무 멀어서 응답속도가 느리다.


그래서 프록시 캐시 서버를 도입을 한다.

보통 CDN 서비스라고 많이 사용한다.

AWS같은 경우 CloudFront 서비스 해당

미국에 있는 원서버같은 경우는 한국의 사용자들에게 응답이 느리다. 그래서 한국의 어딘가에 프록시 캐시 서버를 두고 DNS 요청을 할 떄 조작해서 요청이 오면 미국의 원서버에 직접 접근하는 것이 아닌 프록시 캐시 서버를 거쳐서 오도록 한다. ( 한국에 있는 웹 브라우저가 프록시 캐시 서버에 접근하도록 만든다. )


중간에 프록시 캐시 서버에서  사용하는 캐시를 public캐시라고 하고 웹브라우저나 로컬에서 사용하는 캐시를 private캐시라고 한다.


### Cache-Control 캐시 지시어(directives) - 기타

[]()

- **Cache-Control**: public
    - 응답이 public 캐시에 저장되어도 된다.
- **Cache-Control**: private
    - 웅답이 사용자만을 위한 것, private 캐시에 저장해야 한다.(기본값)
    - ex) 로그인해서 보는 사용자정보를 public 캐시에 두면 큰일난다.
- Cache-Control: s-maxage
    - 프록시 캐시에만 적용하는 max-age
- Age: 60 (HTTP 헤더)
    - 오리진 서버에서 응답 후 프록시 캐시 내에 머문 시간(초)