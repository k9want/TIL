# HTTP 메서드 활용
- 클라이언트에서 서버로 어떻게 데이터 전송
- HTTP API 설계 예시

## 클라이언트에서 서버로 데이터 전송

데이터 전달 방식은 크게 2가지가 있다.

- **쿼리 파라미터를 통한 데이터 전송**
    - GET에서 많이 사용한다.
    - 주로 정렬 필터(검색어)
- **메시지 바디를 통해서 데이터를 전송하는 방법**
    - POST, PUT, PATCH
    - 회원 가입, 상품 주문, 리소스 등록 및 변경 등


### 4가지 상황에 대해서 설명

## 1. 정적 데이터 조회

### 쿼리 파라미터 미사용

정적 데이터를 조회할 때는 단순하게 URI 경로만 넣어서 보내면 서버에서 받아서 이미지리소스를 만들어서 클라이언트한테 응답한다.

이 때는 쿼리 파라미터를 쓰지 않고 추가적인 데이터가 필요가 없다. (정적 데이터를 조회할 때는)

### 정리

- **이미지, 정적텍스트 문서 조회할  때**
- **조회니까  GET 사용**
- **정적 데이터는 일반적으로 쿼리 파라미터 없이 리소스 경로로 단순하게 조회가 가능하다.**

## 2. 동적 데이터 조회

### 쿼리 파라미터 사용


동적 데이터를 조회를 할 때 데이터를 전달해야 한다.

검색어 등 추가 조건(데이터)을 보내야하는데 이때 **쿼리 파라미터를 사용**한다.

### 정리

- **주로 검색, 게시판 목록에서 정렬하거나 필터할 때(검색어)**
- **조회 조건을 줄여주는 필터(검색어), 조회 결과를 정렬해주는 조건에 주로 사용한다.**
- **조회는 GET을 사용**
- **GET은 쿼리 파라미터를 사용해서 데이터를 전달한다. (메시지 바디를 통해 가능은 하나 권장하지 않는다. )**

## 3. HTML Form 데이터 전송

### 3-1 POST 전송 - 저장


HTML form 태그를 통해 입력하고 submit 버튼을 누르면 **웹브라우저는 form 데이터를 읽어서 HTTP 메시지를 생성한다.**

어떤 식으로 생성해줄까? 

Content-Type을 웹브라우저가 **application/x-www-form-urlencoded**로 하고 **내용을 거의 쿼리 파라미터와 유사한 형태 key=value 형태로 데이터를 만들고** HTTP 바디에 넣고 쿼리 파라미터와 거의 동일한 방식으로 서버에 전송한다.

### 3-2 GET 전송 - 저장



HTML form으로 데이터를 전송할 때 GET으로도 가능하다.

submit 버튼을 누르면 웹 브라우저가 GET 메소드로 바꾸고 메시지 바디를 안 쓰니까 쿼리 파라미터로 넣어버리고 서버로 전송한다.

**주의!! - GET은 조회에만 사용하기 때문에 리소스가 변경이 발생하는 곳에서는 사용하면 안된다.**

### 3-3 multipart/form-data


multipart/form-data는 파일 전송할 때 주로 사용한다.

파일을 전송할 때는 파일을 메시지 바디에 넣는 형식을 사용해야 하는데(바이너리 형태로) 이때 Content-Type은 multipart/form-data; boundart —등으로 해서 웹 브라우저가 HTTP메시지를 생성한다.

주로 바이너리 데이터를 전송할 때 사용한다.

### 정리


- **HTML Form submit할 때는 POST 전송**
    - 회원가입, 상품 주문, 데이터 변경할 때 주로 사용
    - Content-Type: application/x-www-form-urlencoded 사용
    - form태그의 내용을 메시지 바디를 통해 쿼리 파라미터 형식으로 전송한다.
    - 전송 데이터를 url encoding처리를 한다.
- **HTML Form은 GET 전송도 가능하다.**
- **Content-Type: multipart/form-data**
    - 파일 업로드같은 바이너리 데이터 전송할 때 사용
    - 다른 종류의 여러 파일과 폼의 내용을 함께 전송 가능하게 해준다.
- HTML Form 전송은 **GET, POST만 지원**한다.

## 4. HTTP API 데이터 전송


안드로이드나 아이폰 애플리케이션에서 서버로 바로 데이터를 전송한다고 할때는 HTTP API로 데이터를 전송한다고 한다.

그냥 직접 다 데이터를 보내면 된다.

### 정리


- **서버에서 서버로 통신**
- **앱 클라이언트에 사용**
- **웹 클라이언트 사용**
    - HTML에서 Form 전송을 대신해서 자바 스크립트를 통한 통신에 사용(AJAX)
    - 리액트나 뷰 같은 웹 클라이언트와 API 통신을 많이 사용한다.
- **POST, PUT, PATCH : 메시지 바디를 통해 데이터 전송 가능**
- **GET : 조회할 때는 항상 쿼리 파라미터로 데이터를 전달하는게 좋다.**
- **Content-Type: application/json을 주로 사용한다(거의 표준)**


