## HTTP 메서드의 속성

- 안전 (Safe Methods)
- 멱등 (Idempotent Methods)
- 캐시가능 (Cacheable Methods)


## 안전 - Safe

- 여러 번 호출해도 **리소스를 변경하지 않는다는 것을 안전하다라고 한다.**
    - GET은 조회만 하니까 안전하다
    - POST , PUT 같은 건 안전하지 않다.
- 만약에 계속 호출해서, 로그 같은게 쌓여서 장애가 발생한다면 안전하지 않은 거 아닌가요?
    - 안전은! 해당 리소스만 고려한다. 그런 부분까지 고려하지 않는다.



## 멱등 - Idempotent

- **한 번 호출하든 여러 번 호출하든 결과가 똑같다는 것을 멱등이라 한다.**
- 멱등 메서드

    - **GET** : 한 번이든 여러 번 조회하든 같은 결과 조회
    - **PUT** : 결과를 대체한다. 따라서 같은 요청을 여러 번해도 최종 결과는 같기 때문에 멱등하다.
    - **DELETE** : 결과를 삭제한다. 같은 요청을 여러번 해도 삭제된 결과는 똑같다.
    - **POST** : 멱등이 하지 않다!! 여러 번 호출하면 같은 결제가 중복해서 발생할 수 있다.
  
- 만약에 재요청 중간에 다른 곳에서 리소스를 변경해버리면??
    - 멱등은 외부 요인으로 중간에 리소스가 변경되는 것까지는 고려하지 않는다.



그러면 멱등이란 개념이 왜 필요하지??

### 멱등을 활용하는 예시

- **자동 복구 메커니즘**
    - **서버가 TIMEOUT 등으로 정상 응답을 못주었을 때, 클라이언트가 같은 요청을 다시해도 되는가 (멱등을 통해서) 하는 판단 근거가 될 수 있다**.
    - ex) DELETE를 호출했는데 서버에서 응답이 없어서 잘 실행되었는지  모를 때 그러면 클라이언트가 자동으로 DELETE를 재시도한다.

## 캐시가능 - Cacheable

- 응답 결과 리소스를 캐시해서 사용할 수 있는가?
- GET, HEAD, POST, PATCH 는 캐시가능하다.
- 하지만 실제로는 GET, HEAD  정도만 캐시로 사용한다.
    - 이유는 POST, PATCH는 본문 내용(body data)까지 캐시 키로 고려해야 하기 때문에 구현이 쉽지 않다. 실무에서는 거의 GET만 캐시로 사용한다.